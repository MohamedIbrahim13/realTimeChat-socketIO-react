{"ast":null,"code":"var _jsxFileName = \"D:\\\\Exercise JavaScript\\\\04_06\\\\serversidesocket\\\\clientsidesocket\\\\src\\\\components\\\\MainHome.js\";\nimport React, { useState, useEffect } from 'react';\nimport RoomList from './RoomList';\nimport MessageList from './MessageList';\nimport SendMessageForm from './SendMessageForm';\nimport io from 'socket.io-client';\nimport queryString from 'query-string';\nimport Users from './Users';\nlet socket;\n\nconst MainHome = ({\n  location\n}) => {\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [message, setMessage] = useState('');\n  const [msgs, setMsgs] = useState([]);\n  const EndPoint = 'http://localhost:4000';\n  useEffect(() => {\n    socket = io(EndPoint);\n    const {\n      name,\n      room\n    } = queryString.parse(location.search);\n    setName(name);\n    setRoom(room);\n    socket.emit('join', {\n      name,\n      room\n    });\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [EndPoint, location.search]);\n  useEffect(() => {\n    socket.on('chat', message => {\n      setMsgs([...msgs, message]);\n    });\n  }, [msgs]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (message) {\n      socket.emit('chatMessage', message, () => setMessage(''));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 col-md-6 col-lg-6 col-xl-6 card mb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(RoomList, {\n    room: room,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(MessageList, {\n    msgs: msgs,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(SendMessageForm, {\n    message: message,\n    setMessage: setMessage,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Users, {\n    users: users,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }))));\n};\n\nexport default MainHome;","map":{"version":3,"sources":["D:/Exercise JavaScript/04_06/serversidesocket/clientsidesocket/src/components/MainHome.js"],"names":["React","useState","useEffect","RoomList","MessageList","SendMessageForm","io","queryString","Users","socket","MainHome","location","name","setName","room","setRoom","message","setMessage","msgs","setMsgs","EndPoint","parse","search","emit","off","on","handleSubmit","e","preventDefault","users"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport RoomList from './RoomList';\r\nimport MessageList from './MessageList';\r\nimport SendMessageForm from './SendMessageForm';\r\nimport io from 'socket.io-client';\r\nimport queryString from 'query-string';\r\nimport Users from './Users';\r\n\r\nlet socket;\r\nconst MainHome = ({location}) => {\r\n  const [name,setName] = useState('');\r\n  const [room,setRoom]= useState('');\r\n  const [message,setMessage]=useState('');\r\n  const [msgs,setMsgs]=useState([]);\r\n  const EndPoint ='http://localhost:4000';\r\n\r\n  useEffect(()=>{\r\n    socket = io(EndPoint);\r\n    const {name,room} = queryString.parse(location.search);\r\n    setName(name);\r\n    setRoom(room);\r\n    socket.emit('join',{name,room});\r\n\r\n    return ()=>{\r\n      socket.emit('disconnect');\r\n      socket.off();\r\n    }\r\n  },[EndPoint,location.search]);\r\n\r\n  useEffect(()=>{\r\n    socket.on('chat',(message)=>{\r\n      setMsgs([...msgs,message]);\r\n    });\r\n  },[msgs]);\r\n\r\n  const handleSubmit =(e)=>{\r\n    e.preventDefault();\r\n    if(message){\r\n      socket.emit('chatMessage',message,()=>setMessage(''));\r\n    }\r\n  };\r\n    \r\n    return (\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"col-3\"></div>      \r\n            <div className=\"col-sm-6 col-md-6 col-lg-6 col-xl-6 card mb-1\">\r\n                <div className=\"card-body\">\r\n                    <RoomList room={room}/>\r\n                    <MessageList msgs={msgs}  />\r\n                    <SendMessageForm  message={message} setMessage={setMessage} handleSubmit={handleSubmit}/>\r\n                    \r\n                </div>\r\n                <Users users={users}/>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n}\r\n\r\nexport default MainHome\r\n"]},"metadata":{},"sourceType":"module"}